<!DOCTYPE html>
<html>
<head>
	<title>To do list lab</title>
	<link rel="stylesheet" type="text/css" href="styles/styles.css">
</head>
<body>
	<div id='container'>
		<header>
			<h2>To Do List</h2>
		</header>

		<p id="itemsRemaining"></p>

		<div class='addNewListItem'>
			<input type='text' id='tb' placeholder='Add a new item'>
			<input type='button' id='btn' value="Add">
		</div>

		<!-- Start with empty table -->
		<table id='tbl'>
		
				<tr id="tableHeader">
					<td>Description</td>
					<td>Completed</td>
					<td>Remove</td>
				</tr>
	
		</table>

		<!-- Here's some HTML we can work with in order to show adding a new table row with text into a table:
		<input type="text" id="tb" placeholder="kiss my keester">
		<input type="button" id="btn" value="ADD">
		<table id="tbl"></table> -->

	</div> 
	<!-- End id='container' div -->

	<script type="text/javascript">
		// on clicking the submit button, do the following
		console.log(document.getElementById("tbl").rows.length);

		var itemNumber = document.getElementById("tbl").rows.length-1;
		document.getElementById('itemsRemaining').innerHTML="Items remaining: " + itemNumber;

		document.getElementById('btn').onclick = function(){
			console.log(document.getElementById('tb').value);//log out the value of the text box

			var inputtedItem = document.getElementById('tb').value;

			// Create table row element
			var myTR = document.createElement('tr');


			//Create table data element with user input
			var myTD = document.createElement('td');
			myTD.innerHTML = inputtedItem;//Inserts text of the inserted item between 
			//console.log(myTD);

			//Create table data element for completed(?) checkbox 
			var completedCheckboxTD = document.createElement('td');//creates TD tags

			var completedCheckbox = document.createElement('input');//creates input element
			completedCheckbox.type = 'checkbox';	//makes input element of type checkbox
			completedCheckbox.id = 'completedFlag';	//makes id of input element equal to completedFlag
			completedCheckbox.className = 'completedFlagClass';
			completedCheckbox.onclick = onClickHandler;//adds an event handler in the html
			completedCheckboxTD.appendChild(completedCheckbox);//appends the checkbox to the TD tags


			//Create table data element for remove(?) checkbox 
			var removeCheckboxTD = document.createElement('td');//creates TD tags

			var removeCheckbox = document.createElement('input');//creates input element
			removeCheckbox.type = 'checkbox';	//makes input element of type checkbox
			removeCheckbox.id = 'removeFlag';	//makes id of input element equal to completedFlag
			removeCheckbox.className = 'removeFlagClass';
			removeCheckbox.onclick = onClickRemoveHandler;//adds an event handler in the html
			removeCheckboxTD.appendChild(removeCheckbox);//appends the checkbox to the TD tags

			//Append all td to the tr as children
			myTR.appendChild(myTD);//insert the data
			myTR.appendChild(completedCheckboxTD);//insert the checkbox that's in the TD to the TR
			myTR.appendChild(removeCheckboxTD);//insert the checkbox that's in the TD to the TR

			//Appends TR to the table in the HTML
			document.getElementById('tbl').appendChild(myTR);

			//Updates field that shows number of items remaning
			itemNumber = document.getElementById("tbl").rows.length-1;
			document.getElementById('itemsRemaining').innerHTML="Items remaining: " + itemNumber;

			//Resets input field to blank
			document.getElementById('tb').value = '';

		};
		// End add event handler

		// START EVENT HANDLER FOR WHEN COMPLETED CHECKBOX IS CHECKED
		function onClickHandler(){
			//Update the number of items remaining at the top of the page
			if (this.checked){
				itemNumber =itemNumber-1;
				
				document.getElementById('itemsRemaining').innerHTML="Items remaining: " + itemNumber;
			}
			else{

				itemNumber =itemNumber+1;		
				document.getElementById('itemsRemaining').innerHTML="Items remaining: " + itemNumber;
			}

		}
		//END EVENT HANDLER FOR WHEN COMPLETED CHECKBOX IS CHECKED

		// START EVENT HANDLER FOR WHEN REMOVE CHECKBOX IS CHECKED.
		function onClickRemoveHandler(){
			if (this.checked){
				itemNumber =itemNumber-1;
				
				document.getElementById('itemsRemaining').innerHTML="Items remaining: " + itemNumber;
			}
			else{

				itemNumber =itemNumber+1;		
				document.getElementById('itemsRemaining').innerHTML="Items remaining: " + itemNumber;
			}

			//finds the row to remove by going to the parent of the checkbox (the <td>), and then the parent of that (the <tr>)
			var rowToRemove = this.parentNode.parentNode;
			//Finds the parent of the row to remove
			var parentRowToRemove = rowToRemove.parentNode;
			//Removes the to do row
			parentRowToRemove.removeChild(rowToRemove);

		}
		//END EVENT HANDLER FOR WHEN REMOVE CHECKBOX IS CHECKED

	</script>

</body>
</html>